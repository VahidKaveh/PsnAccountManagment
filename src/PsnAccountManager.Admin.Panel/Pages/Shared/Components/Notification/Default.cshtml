@model IEnumerable<PsnAccountManager.Domain.Entities.AdminNotification>

@{
    var unreadCount = (int)ViewData["UnreadCount"];
}

<li class="nav-item dropdown">
    <a class="nav-link" data-toggle="dropdown" href="#">
        <i class="bi bi-bell-fill"></i>
        @if (unreadCount > 0)
        {
            <span class="badge badge-warning navbar-badge">@unreadCount</span>
        }
    </a>
    <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
        @if (unreadCount > 0)
        {
            <span class="dropdown-header">@unreadCount New Notifications</span>
            <div class="dropdown-divider"></div>
            @foreach (var notification in Model)
            {
                <a href="@notification.LinkUrl" class="dropdown-item">
                    <i class="bi bi-file-earmark-text mr-2"></i>
                    <span>@notification.Message.Substring(0, Math.Min(notification.Message.Length, 35))...</span>
                    <span class="float-right text-muted text-sm">@notification.CreatedAt.ToShortTimeString()</span>
                </a>
                <div class="dropdown-divider"></div>
            }
        }
        else
        {
            <span class="dropdown-header">No New Notifications</span>
        }
        <a href="#" class="dropdown-item dropdown-footer">See All Notifications</a>
    </div>
</li>